---
title: ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ í”íˆ ì €ì§€ë¥´ëŠ” ì‹¤ìˆ˜ 10ê°€ì§€
date: 2020-12-22
category: ê´€ë¦¬
tags:
  - Production
description: ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ë°˜ë³µë˜ëŠ” ì‹¤ìˆ˜ë¥¼ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.
image: /imgs/archive/2020-12-22-k8s-mistake-10/share.png
---

# ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ í”íˆ ì €ì§€ë¥´ëŠ” ì‹¤ìˆ˜ 10ê°€ì§€

<blog-title-info :page="$page" />

ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì—¬ëŸ¬ê°€ì§€ ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ê´€ë¦¬ìê°€ ì œì–´í•  ìˆ˜ ìˆëŠ” ì„¤ì •ì´ ë§ìŠµë‹ˆë‹¤. ë³„ë‹¤ë¥¸ ì„¤ì •ì„ í•˜ì§€ ì•Šì•„ë„ ì˜ ë™ì‘í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ì§€ë§Œ, ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ì¢€ë” ì„¸ë°€í•œ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.

## ì£¼ìš” ë‚´ìš©

[ì›ê¸€](<(https://blog.pipetail.io/posts/2020-05-04-most-common-mistakes-k8s/)>)ì„ ê°„ë‹¨í•˜ê²Œ ìš”ì•½í–ˆìŠµë‹ˆë‹¤.

**1. resources - requests and limits**

- CPU, Memory ì‚¬ìš©ëŸ‰ ìš”ì²­ ë° ì œí•œí•˜ê¸°

**2. liveness and readiness probes**

- í—¬ìŠ¤ì²´í¬í•˜ê¸°

**3. LoadBalancer for every http service**

- http ì„œë¹„ìŠ¤ëŠ” ì—¬ëŸ¬ê°œì˜ ë¡œë“œë°¸ëŸ°ì„œë³´ë‹¤ í•˜ë‚˜ì˜ Ingress ì‚¬ìš©í•˜ê¸°

**4. non-kubernetes-aware cluster autoscaling**

- [cluster autoscaling](https://github.com/kubernetes/autoscaler/tree/master/cluster-autoscaler)ì„ ì´ìš©í•˜ì—¬ ë…¸ë“œë¥¼ ìë™ìœ¼ë¡œ í™•ì¥í•˜ê³  ê´€ë¦¬í•˜ê¸°

**5. Not using the power of IAM/RBAC**

- AWS SECRET ACCESS KEYë¥¼ ì‚¬ìš©í•˜ì§€ ë§ê³  ì„œë¹„ìŠ¤ ì–´ì¹´ìš´íŠ¸ - [IRSA(IAM roles for service accounts)](https://docs.aws.amazon.com/eks/latest/userguide/iam-roles-for-service-accounts.html)ë¥¼ ì‚¬ìš©í•˜ì

**6. self anti-affinities for pods**

- Podì„ ì—¬ëŸ¬ ë…¸ë“œì— ë¶„ì‚°í•˜ê¸° ìœ„í•´ `anti-affinites`ë¥¼ ì§€ì •í•˜ì

**7. no poddisruptionbudget**

- `PodDisruptionBudget (pdb)`ëŠ” Podì˜ ìµœì†Œ ê°œìˆ˜ë¥¼ ë³´ì¦í•œë‹¤

**8. more tenants or envs in shared cluster**

- ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ `namespace`ë¥¼ ì´ìš©í•œ ê²©ë¦¬ë¥¼ ë¯¿ì§€ ë§ê³  ë³„ë„ í´ëŸ¬ìŠ¤í„°ë¡œ ê´€ë¦¬í•˜ì

**9. externalTrafficPolicy: Cluster**

- Pod ë„¤íŠ¸ì›Œí¬ ì§€ì—°ì‹œê°„ì„ ì¤„ì´ê¸° ìœ„í•´ Podì´ ë–  ìˆëŠ” ë…¸ë“œì˜ í¬íŠ¸ë§Œ ì˜¤í”ˆí•˜ëŠ” Local ì„¤ì •ì„ ì‚¬ìš©í•˜ì

**10. pet clusters + stressing the control plane too much**

- í´ëŸ¬ìŠ¤í„°ëŠ” ì‰½ê²Œ ìƒˆë¡œ ë§Œë“¤ìˆ˜ ìˆê³  ë‘ë ¤ì›Œí•˜ì§€ ë§ë¼

**bonus: using latest tag**

- ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì—ì„œ `latest` íƒœê·¸ ì‚¬ìš©ì€ ë” ì´ìƒ ê·¸ë§Œ..

ë” ìƒì„¸í•œ ë‚´ìš©ì€ ğŸ‘‡ ë‹¤ìŒ ë§í¬ë¥¼ í™•ì¸í•˜ì„¸ìš”!

## ì°¸ê³ 

- [10 most common mistakes using kubernetes](https://blog.pipetail.io/posts/2020-05-04-most-common-mistakes-k8s/)
